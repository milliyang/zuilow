# Scheduler config
# Markets (HK/US/BTC open times and auto execution jobs) are in markets.yaml.

scheduler:
  timezone: Asia/Hong_Kong
  enabled: true
  max_workers: 3  # Max concurrent jobs

  jobs:
    # HK market strategy -> account name (see config/accounts/*.yaml). Config from strategy init_config().
    - name: daily_sma
      strategy: SMAStrategy
      symbols: [HK.00700, HK.09988]
      trigger: cron
      cron: "30 16 * * 1-5"             # Run every day at 16:30 (Monday to Friday) in Hong Kong time
      mode: live
      account: "Paper-Trade-US-01"
      market: HK
      send_immediately: false
      priority: 1
      enabled: false

    # US market strategy -> another account
    - name: intraday_rsi
      strategy: RSIStrategy
      symbols: [US.AAPL, US.TSLA]
      trigger: interval
      minutes: 30                        # Run every 30 minutes
      mode: live
      account: "Paper-Trade-US-02"
      market: US
      send_immediately: false
      priority: 5
      enabled: false

    - name: buy_and_hold_us
      strategy: BuyAndHold
      symbols: [US.AAPL, US.TSLA]
      trigger: interval
      hours: 5                            # Run every 5 hours in Hong Kong time
      mode: live
      account: "Paper-Trade-US-01"
      market: US
      send_immediately: false    # Write to SignalStore for market execution instead of sending immediately
      priority: 5
      enabled: false

    - name: grl_5d_topk_reg
      strategy: Grl5dTopkReg
      symbols: []                         # No per-symbol on_bar; get_rebalance_output returns allocation
      trigger: interval
      days: 1                             # Run every 1 day in Hong Kong time
      mode: live
      account: "Paper-Trade-US-01"
      market: US    
      send_immediately: false
      priority: 5
      enabled: true

    # Rebalance after close; exec_US_open runs at market open next day
    - name: rebalance_after_close
      strategy: RebalanceAfterClose
      symbols: [US.AAPL, US.TSLA]
      trigger: cron
      cron: "30 16 * * 1-5"             # Run every day at 16:30 (Monday to Friday) in Hong Kong time
      mode: live
      account: "Paper-Trade-US-01"
      market: US
      send_immediately: false
      priority: 5
      enabled: false

    # Test: random 5 US symbols and weights, rebalance every 10 days (config from strategy init_config())
    - name: bull5d_random
      strategy: RandomBuyOrSell
      symbols: []   # No per-symbol on_bar; get_rebalance_output returns allocation
      trigger: interval
      hours: 240                        # Run every 10 days (240 hours) in Hong Kong time
      mode: live
      account: "Paper-Trade-US-01"
      market: US
      send_immediately: false
      priority: 2                             # High priority
      enabled: false

# Notification (optional)
notification:
  enabled: false  # Enable when needed
  types: [email]       # email, webhook, dingtalk

  notify_on_success: false
  notify_on_failure: true
  notify_on_signal: true

  # See scheduler.example.yaml for full options

  # Webhook
  webhook_url: http://localhost:8080/notifications
  webhook_headers:
    Content-Type: application/json
    Authorization: Bearer your-token

  # Email (optional)
  email_smtp_host: smtp.gmail.com
  email_smtp_port: 465
  email_from: your-email@gmail.com
  email_password: your-password
  email_to:
    - admin@example.com

  # DingTalk (optional)
  dingtalk_webhook: https://oapi.dingtalk.com/robot/send?access_token=xxx
  dingtalk_secret: your-secret
